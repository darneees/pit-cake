<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description"
            content="PitCake - receitas, cupcakes e muitas outras delicias." />
        <meta name="author" content="PitCake" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Criar conta - Pit Cake</title>
        <!-- import css -->
        <link rel="stylesheet" href="../src/styles/signup/signup.css">
    </head>
    <body>

        <article id="user-create-message">
            <p>Conta criada com sucesso.</p>
            <ion-icon name="checkmark-circle-outline"></ion-icon>
        </article>

        <article id="privacy-modal">
            <button type="button" id="close-privacy-modal" class="close">
                <ion-icon name="close-outline"></ion-icon>
            </button>
            <h1>Política de Privacidade</h1>

            <p>Nós, da PitCake, estamos comprometidos com a proteção e a
                privacidade das informações pessoais de nossos usuários. Esta
                Política de Privacidade descreve como coletamos, usamos e
                protegemos seus dados ao utilizar nossos serviços.</p>

            <details>
                <summary>1. Coleta de Informações</summary>
                <p>Durante o uso do nosso sistema, podemos coletar as seguintes
                    informações:

                    Dados pessoais fornecidos, como nome, e-mail e informações
                    de
                    contato.
                    Informações relacionadas ao uso da plataforma, como
                    preferências
                    e interações.</p>
            </details>

            <details>
                <summary>2. Uso das Informações</summary>
                <p>As informações coletadas são utilizadas para:

                    Melhorar a experiência do usuário.
                    Personalizar conteúdos e recomendações.
                    Enviar comunicações relevantes, como notificações e
                    atualizações.</p>
            </details>

            <details>
                <summary>3. Compartilhamento de Dados</summary>
                <p>Garantimos que suas informações pessoais não serão vendidas,
                    alugadas
                    ou compartilhadas com terceiros, exceto quando necessário
                    para:

                    Cumprir obrigações legais.
                    Proteger os direitos e a segurança dos usuários.</p>
            </details>

            <details>
                <summary>4. Segurança</summary>
                <p>Adotamos medidas rigorosas para proteger seus dados contra
                    acessos não autorizados, uso indevido ou alterações. No
                    entanto,
                    é importante lembrar que nenhum sistema é completamente
                    seguro,
                    e incentivamos nossos usuários a protegerem suas contas.</p>
            </details>

            <details>
                <summary>5. Seus Direitos</summary>
                <p>Você tem o direito de:

                    Acessar suas informações pessoais.
                    Corrigir dados incorretos.
                    Solicitar a exclusão de seus dados, quando aplicável.</p>
            </details>

            <details>
                <summary>6. Alterações na Política</summary>
                <p>Podemos atualizar esta Política de Privacidade
                    periodicamente.
                    Recomendamos revisar este documento regularmente para estar
                    ciente de possíveis alterações.</p>
            </details>

            <details>
                <summary>7. Contato</summary>
                <p>Caso tenha dúvidas sobre esta Política de Privacidade ou
                    sobre
                    como utilizamos suas informações, entre em contato conosco
                    pelo
                    e-mail: suporte@pitcake.com.
                </p>
            </details>
        </article>

        <main>

            <form>
                <label for="email" class="input">
                    <div><label>Email</label></div>
                    <input type="email" placeholder="seu@email.com"
                        onchange="onChangeEmail()" id="email" />
                    <div class="error" id="email-required-error">
                        Email é obrigatório
                    </div>
                    <div class="error" id="email-invalid-error">
                        Email é inválido
                    </div>
                </label>

                <label for="senha" class="input">
                    <label>Senha</label>
                    <input type="password"
                        placeholder="Senha"
                        id="password"
                        onchange="onChangePassword()" 
                        maxlength="8"
                        oninput="updateCharacterCount(this)"/>
                    <ion-icon id="password-icon"
                        name="eye-off-outline"
                        onclick="showPassword()"></ion-icon>

                    <div class="error"
                        id="password-required-error">
                        Senha é obrigatório
                    </div>
                    <div class="error"
                        id="password-min-length-error">
                        Senha deve ter pelo menos 8 caracteres
                    </div>
                    <span class="char-count">0/8</span>
                </label>

                <label for="confirmar senha" class="input">
                    <div><label>Confirmar senha</label></div>
                    <input type="password" placeholder="Confirmar senha"
                        id="confirmPassword"
                        onchange="onChangeConfirmPassword()" />
                    <div class="error" id="password-doesnt-match-error">
                        Senha e Confirmar senha devem ser iguais
                    </div>
                </label>

                <button type="button" class="accept" id="open-privacy-modal">
                    Termos e politica de privacidade.
                </button>

                <button type="button" class="solid" disabled="true"
                    onclick="register()" id="register-button">
                    Criar conta
                </button>
            </form>

            <a href="../index.html" rel="noopener noreferrer"
                class="button-back">Voltar</a>
        </main>

        <script src="scripts/signup.js"></script>
        <script src="scripts/Validations.js"></script>

        <script
            src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
        <script
            src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>

        <!-- import icon -->
        <script type="module"
            src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule
            src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

        <script src="../src/services/firebase-init.js"></script>
        <!-- import js -->
        <!-- <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
            import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-auth.js";
          
            const firebaseConfig = {
              apiKey: "AIzaSyB2AHNt_PivaDLXIkNAcdp3VqTkyP3VLPM",
              authDomain: "pit-cake.firebaseapp.com",
              projectId: "pit-cake",
              storageBucket: "pit-cake.firebasestorage.app",
              messagingSenderId: "228216532358",
              appId: "1:228216532358:web:5488cd1695a894cbe7d007",
            };
          
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
          
            // REGISTRAR NOVOS USUÁRIOS
            document.getElementById("create-button").addEventListener("click", () => {
              const email = form.email().value;
              const password = form.password().value;
          
              createUserWithEmailAndPassword(auth, email, password)
                .then((response) => {
                  const userCreateSuccess = document.getElementById("user-create-message");
                  userCreateSuccess.textContent = "Conta criada com sucesso!";
                  userCreateSuccess.style.display = "flex";
          
                  setTimeout(() => {
                    userCreateSuccess.style.display = "none";
                  }, 2800);
                  resetForm();
                })
                .catch((error) => {
                  const userCreateError = document.getElementById("user-create-error");
                  userCreateError.textContent = getErrorMessage(error);
                  userCreateError.style.display = "flex";
          
                  setTimeout(() => {
                    userCreateError.style.display = "none";
                  }, 2800);
                  resetForm();
                });
            });
          
            // RESETAR FORMULÁRIO
            function resetForm() {
              form.email().value = "";
              form.password().value = "";
            }
          
            // FORMULÁRIO
            const form = {
              email: () => document.getElementById("email"),
              password: () => document.getElementById("password"),
            };
          
            // MENSAGEM DE ERRO FIREBASE
            function getErrorMessage(error) {
              switch (error.code) {
                case "auth/email-already-in-use":
                  return "Este email já está em uso.";
                case "auth/invalid-email":
                  return "O email fornecido é inválido.";
                case "auth/weak-password":
                  return "A senha deve ter pelo menos 6 caracteres.";
                case "auth/network-request-failed":
                  return "Falha de rede detectada. Verifique sua conexão com a internet e tente novamente.";
                default:
                  return "Ocorreu um erro desconhecido. Por favor, tente novamente mais tarde.";
              }
            }
        </script> -->
    </body>
</html>